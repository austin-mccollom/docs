---
title: 'Deploy to Vercel'
metaTitle: 'Deploy to Vercel'
metaDescription: 'Learn how to deploy a Next.js application based on Prisma Client to Vercel.'
---

<TopBlock>

This guide takes you through the steps to set up and deploy a serverless application that uses Prisma to [Vercel](https://vercel.com/).

Vercel is a cloud platform that hosts static sites and serverless functions. You can integrate a Vercel project with a GitHub repository to allow you to deploy automatically when you make new commits. [Next.js](https://nextjs.org/) is a full-stack React-based serverless framework that integrates seamlessly with Vercel.

We created an [example application](https://github.com/prisma/deployment-example-vercel) using Next.js you can use as a reference when deploying an application using Prisma to Vercel.

![Prisma Vercel deploys - architecture diagram](./images/300-00-deploy-to-vercel-architecture.png)

</TopBlock>

## Prerequisites

Before you can follow this guide, you will need to set up your application to begin deploying to Vercel. We recommend the [Next.js on Vercel](https://vercel.com/docs/frameworks/nextjs#) guide as a place to get started.

If you [add a separate database for preview deployments](#3-optional-add-a-separate-database-for-preview-deployments), you will also need:

- a second hosted PostgreSQL database and a connection string for it

## Generate Prisma during build

Vercel will automatically cache dependencies on deployment. For most applications, this will not cause any issues. However, for Prisma, it may result in an outdated version of Prisma Client on a change in your Prisma schema. To avoid this issue, add `prisma generate` to the `postinstall` script of your application:

```json file=package.json highlight=4;add
{
  ...
  "scripts" {
    "postinstall": "prisma generate"
  }
  ...
}
```

This will re-generate Prisma Client at build time so that your deployment always has an up-to-date client.

## Add a separate database for preview deployments

By default, your application will have a single _production_ environment associated with the `main` git branch of your repository. If you open a pull request to change your application, Vercel creates a new _preview_ environment.

Vercel uses the `DATABASE_URL` environment variable you define when you import the project for both the production and preview environments. This causes problems if you create a pull request with a database schema migration because the pull request will change the schema of the production database.

In this section you associate a second database with a Vercel preview environment.

### Steps

1. Click the **Settings** tab of your Vercel project.

2. Click **Environment variables**.

3. Add an environment variable with a key of `DATABASE_URL` and select only the **Preview** environment option:

   ![Add an environment variable for the preview environment](./images/300-60-deploy-to-vercel-preview-environment-variable.png)

4. Set the value to the connection string of your second PostgreSQL database. As before, the connection string has the following format:

   ```code
   postgresql://__USER__:__PASSWORD__@__HOST__/__DATABASE__
   ```

5. Click **Save**.

## Connection pooling

When you use a Function-as-a-Service provider, like Vercel Serverless functions, pooling database connections for performance reasons is beneficial. This is because every function invocation may result in a new connection to your database which can quickly run out of open connections.

You can use [Accelerate](/data-platform/accelerate) for connection pooling, to reduce your Prisma Client bundle size, and to avoid cold starts.

For more information on connection management for serverless environments, refer to our [connection management guide](/guides/performance-and-optimization/connection-management#serverless-environments-faas).
